<!-- Content Heading -->

<% if (title) { %>
    <h1>
        <%= title %>
    </h1>
<% } else { res.redirect('/') } %>

<!-- Flash Message Section -->
<%- messages() %>

<% if (errors) { %>
    <ul class="notice">
        <% errors.array().forEach(error=> { %>
            <li>
                <%= error.msg %>
            </li>
            <% }) %>
    </ul>
<% } %>

<!-- Content -->
<div class="account-container">
    <form class="account-form" id="updateForm" action="/inv/edit-inventory" method="post">

        <label for="classificationList">Classification</label>
        <%- classificationList %>


        <label for="inv_make">Make</label>
        <input type="text" name="inv_make" id="inv_make" required pattern="^[A-Za-z][A-Za-z0-9\- ]{2,20}$" value="<%= locals.inv_make %>" placeholder="Min of 3 Characters">

        <label for="inv_model">Model</label>
        <input type="text" name="inv_model" id="inv_model"  pattern="^[A-Za-z][A-Za-z0-9\- ]{2,30}$" value="<%= locals.inv_model %>" placeholder="Min of 3 Characters">

        <label for="inv_description">Description</label>
        <textarea name="inv_description" id="inv_description"  rows="5" required><%= locals.inv_description %></textarea>

        <label for="inv_image">Image Path</label>
        <input type="text" name="inv_image" id="inv_image" required pattern="^\/images\/vehicles\/.+\.(png|jpg|jpeg|webp)$" 
            value="<%= ( locals.inv_image !== undefined && locals.inv_image !== '') ? locals.inv_image : '/images/vehicles/no-image.png' %>">

        <label for="inv_thumbnail">Thumbnail Path</label>
        <input type="text" name="inv_thumbnail" id="inv_thumbnail" required pattern="^\/images\/vehicles\/.+\.(png|jpg|jpeg|webp)$"
            value="<%= (locals.inv_thumbnail !== undefined && locals.inv_thumbnail !== '') ? locals.inv_thumbnail:'/images/vehicles/no-image-tn.png' %>">

        <label for="inv_price">Price</label>
        <input type="number" name="inv_price" id="inv_price" inputmode="decimal" required step="0.01" min="0" placeholder="Decimal or integer" value="<%= locals.inv_price %>">

        <label for="inv_year">Year</label>
        <input type="number" name="inv_year" id="inv_year" required min="1900" max="2099" step="1" placeholder="4-digit year" value="<%= locals.inv_year %>">

        <label for="inv_miles">Miles</label>
        <input type="number" name="inv_miles" id="inv_miles" required  min="0" step="1" inputmode="numeric" placeholder="Digits only" value="<%= locals.inv_miles%>">

        <label for="inv_color">Color</label>
        <input type="text" name="inv_color" id="inv_color" required pattern="^[A-Za-z][A-Za-z ]{2,10}$" value="<%= locals.inv_color %>">

        <button type="submit" disabled>Update Vehicle</button>
        <input type="hidden" name="inv_id" 
        <% if(locals.inv_id) { %> value="<%= locals.inv_id %>"
        <% } %>>
        <a class="cancel-button" href="/inv/">Cancel</a>
    </form>
</div>

<script src="../../js/inv-update.js"></script>